!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("date-fns")},function(e,t){e.exports=require("react-chartjs-2")},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),c=n(6),i=n.n(c);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a='<!DOCTYPE html>\n              <html lang="en">\n              <head>\n                <meta charset="utf-8">\n                <meta name="viewport" content="width=device-width, initial-scale=1.0">\n                <title> '.concat(e,' </title>\n                <link href="/hackerNews/web/index.css" rel="stylesheet">\n              </head>\n              <body>\n                <div class="content">\n                   <div id="app" class="wrap-inner">\n                      ').concat(t,"\n                   </div>\n                </div>\n                <script>\n                window.__PRELOADED_STATE__ = ").concat(JSON.stringify(n).replace(/</g,"\\u003c"),'\n                <\/script>\n                <script src="/hackerNews/web/index.js"> <\/script>\n              </body>\n              ');return a}var l=n(0),s=n.n(l),u=n(7),d=n(3),f=n(5),p=n(8),h=n.n(p),m=n(2),g=n.n(m);function w(e){return{type:"UPDATE_NEWS",news:e}}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,news:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_NEWS":return Object.assign({},e,{isFetching:!0});case"UPDATE_NEWS":return Object.assign({},e,{isFetching:!1,news:t.news});default:return e}};var v=n(9),b=function(e,t,n){var a=N(e.page),r=a.hits.findIndex((function(e){return e.objectID===t}));n?a.hits.splice(r,1):a.hits[r].points++,localStorage.setItem(e.page,JSON.stringify(a))},N=function(e){return JSON.parse(localStorage.getItem(e))},x=function(e,t){return N(e)?t(N(e)):null},S=n(10),j=function(e,t){var n=function(e,t){var n={objectIds:[],votes:[]};return t.hits.map((function(e){n.objectIds.push(e.objectID),n.votes.push(e.points)})),n}(0,t);return{labels:n.objectIds,datasets:[{label:"",fill:!1,lineTension:.5,backgroundColor:"blue",borderColor:"blue",borderWidth:2,data:n.votes}]}},y=function(e){e.page;var t=e.news;return s.a.createElement("div",{className:"lineChart sticky"},s.a.createElement(S.Line,{data:j(0,t),options:{legend:{display:!1}}}))},k=n(1),O=function(e){var t=e.page,n=e.nbPages,a=e.updateNews;return s.a.createElement("div",{class:"paginationLink"},s.a.createElement(k.Link,{to:"/hackerNews/".concat(t-1),onClick:function(){return a(t-1)},className:t?"":"disableLink"},"Previous"),s.a.createElement("span",null," | "),s.a.createElement(k.Link,{to:"/hackerNews/".concat(t+1),onClick:function(){return a(t+1)},className:t===n-1?"disableLink":""},"Next"))},M=function(){return s.a.createElement("tr",null,s.a.createElement("th",null,"Comments"),s.a.createElement("th",null,"Vote Count"),s.a.createElement("th",null,"UpVote"),s.a.createElement("th",null,"News Details"))},_=function(e){var t=e.news,n=e.info,a=e.updateModifiedNews;return s.a.createElement("span",{"aria-label":"upvote",class:"upVote clickable",onClick:function(){b(t,n.objectID,!1),a(N(t.page))}})},P=function(e){var t=e.news,n=e.info,a=e.updateModifiedNews;return s.a.createElement("span",{className:"highlight clickable",onClick:function(){b(t,n.objectID,!0),a(N(t.page))}},"hide")},D=function(e){var t,n,a,r=e.news,c=e.info,i=e.updateModifiedNews;return s.a.createElement("div",{className:"description"},s.a.createElement("span",{className:"highlight title"},s.a.createElement("a",{href:c.url},c.title)),s.a.createElement("span",{className:"url"}," ( ",s.a.createElement("a",{href:c.url},(a=c.url)&&a.replace("http://","").replace("https://","").split(/[/?#]/)[0]),") by "),s.a.createElement("span",{className:"highlight"},c._highlightResult.author.value),s.a.createElement("span",null,c.time," ",(t=c.created_at,n=new Date(t),Object(v.formatDistanceToNow)(n))," ago ["),s.a.createElement(P,{news:r,info:c,updateModifiedNews:i}),s.a.createElement("span",null,"]"))},T=function(e){var t=e.news,n=e.updateModifiedNews;return t.hits.length&&t.hits.map((function(e){return s.a.createElement("tr",{key:e.objectID},s.a.createElement("td",null,e.num_comments),s.a.createElement("td",null,e.points),s.a.createElement("td",null,s.a.createElement(_,{news:t,info:e,updateModifiedNews:n})),s.a.createElement("td",null,s.a.createElement(D,{info:e,news:t,updateModifiedNews:n})))}))},F=function(e){var t=e.news,n=e.updateModifiedNews;return s.a.createElement("div",null,s.a.createElement("table",null,s.a.createElement(M,null),s.a.createElement(T,{news:t,updateModifiedNews:n})))},I=function(e){var t=e.news,n=e.updateModifiedNews;return s.a.createElement(k.Switch,null,s.a.createElement(k.Route,{exact:!0,path:"/hackerNews"},s.a.createElement(F,{news:t,updateModifiedNews:n})),s.a.createElement(k.Route,{path:"/hackerNews/:page"}," ",s.a.createElement(F,{news:t,updateModifiedNews:n})))},q=(n(11),Object(d.connect)((function(e){return{isFetching:e.isFetching,news:e.news}}),{fetchNews:function(e){return function(t){return t({type:"REQUEST_NEWS"}),g.a.get("https://hn.algolia.com/api/v1/search?page=".concat(e)).then((function(e){t(w(e.data))})).catch((function(e){console.log("Fetch failed",e)}))}},updateModifiedNews:w})((function(e){var t=e.isFetching,n=e.news,a=e.fetchNews,r=e.updateModifiedNews,c=n.hits,i=n.page,o=n.nbPages;return Object(l.useEffect)((function(){!function(e){!N(e.page)&&localStorage.setItem(e.page,JSON.stringify(e))}(n)})),Object(l.useEffect)((function(){x(n.page,r)}),[]),s.a.createElement(s.a.Fragment,null,t&&s.a.createElement("h2",null,"Loading..."),!t&&c.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(I,{news:n,updateModifiedNews:r}),s.a.createElement(O,{page:i,nbPages:o,updateNews:function(e){N(e)?x(e,r):a(e)}}),s.a.createElement(y,{page:i,news:n})):null)}))),C=function(e,t){var n=function(e){return Object(f.createStore)(E,e,Object(f.applyMiddleware)(h.a))}(e);return{content:Object(u.renderToString)(s.a.createElement(d.Provider,{store:n},s.a.createElement(k.StaticRouter,{location:t.url,context:{}},s.a.createElement(q,null)),",")),preloadedState:n.getState()}},R=r()(),L=process.env.PORT||8080;R.use("/hackerNews/web",r.a.static(i.a.resolve(__dirname,"../web")));var U=function(e){return{isFetching:!1,news:e}};R.get("/hackerNews",(function(e,t){g.a.get("https://hn.algolia.com/api/v1/search?page=0").then((function(n){var a=o("Server Rendered Page",C(U(n.data),e).content,U(n.data));return t.send(a)})).catch((function(e){console.log("Fetch failed",e)}))})),R.get("/hackerNews/:page",(function(e,t){var n=e.params.page;g.a.get("https://hn.algolia.com/api/v1/search?page=".concat(n)).then((function(n){var a=o("Server Rendered Page",C(U(n.data),e).content,U(n.data));return t.send(a)})).catch((function(e){console.log("Fetch failed",e)}))})),R.listen(L,(function(){console.log("Listening to the port 8080")}))}]);